/* Modern Typography & Readability Enhancement System */
/* 次世代可読性向上技術の統合実装 */

/* Variable Fonts Import - Google Fonts API v2 */
@import url('https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');

/* CSS Custom Properties for Dynamic Typography */
:root {
  /* Variable Font Axes */
  --font-weight-light: 300;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  --font-weight-black: 900;
  
  /* Optical Size Adjustments */
  --optical-size-small: 14;
  --optical-size-medium: 18;
  --optical-size-large: 32;
  
  /* Dynamic Contrast Ratios */
  --text-contrast-low: 4.5;
  --text-contrast-medium: 7;
  --text-contrast-high: 12;
  
  /* Adaptive Typography Scale */
  --type-scale-ratio: 1.25;
  --base-font-size: clamp(16px, 1.5vw, 18px);
  
  /* Advanced Color Spaces (P3 Wide Gamut) */
  --text-primary-p3: color(display-p3 0.95 0.95 0.98);
  --text-secondary-p3: color(display-p3 0.75 0.78 0.85);
  --accent-primary-p3: color(display-p3 0.2 0.4 0.9);
}

/* Modern Font Stack with Variable Fonts */
.modern-typography {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI Variable', 'Segoe UI', system-ui, sans-serif;
  font-variation-settings: 
    'wght' var(--font-weight-normal),
    'opsz' var(--optical-size-medium);
  font-optical-sizing: auto;
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Advanced Text Enhancement Layer */
.enhanced-readability {
  /* Modern backdrop blur with multiple layers */
  position: relative;
  isolation: isolate;
}

.enhanced-readability::before {
  content: '';
  position: absolute;
  inset: -12px;
  background: 
    linear-gradient(
      135deg,
      rgba(26, 26, 26, 0.85) 0%,
      rgba(26, 26, 26, 0.75) 50%,
      rgba(26, 26, 26, 0.9) 100%
    );
  backdrop-filter: 
    blur(16px) 
    saturate(1.2) 
    brightness(1.1)
    contrast(1.05);
  -webkit-backdrop-filter: 
    blur(16px) 
    saturate(1.2) 
    brightness(1.1)
    contrast(1.05);
  border-radius: 16px;
  z-index: -1;
  transition: backdrop-filter 0.3s ease;
}

/* CSS Container Queries for Responsive Typography */
.typography-container {
  container-type: inline-size;
  container-name: text-container;
}

@container text-container (min-width: 320px) {
  .responsive-text {
    font-size: 0.875rem;
    --font-weight-adjustment: 450;
  }
}

@container text-container (min-width: 768px) {
  .responsive-text {
    font-size: 1rem;
    --font-weight-adjustment: 400;
  }
}

@container text-container (min-width: 1024px) {
  .responsive-text {
    font-size: 1.125rem;
    --font-weight-adjustment: 380;
  }
}

/* Advanced Text Shadow System */
.premium-text-shadow {
  text-shadow: 
    0 1px 2px rgba(0, 0, 0, 0.8),
    0 2px 4px rgba(0, 0, 0, 0.6),
    0 4px 8px rgba(0, 0, 0, 0.3),
    0 0 16px rgba(30, 58, 138, 0.2);
  
  /* CSS Text Stroke for better definition */
  -webkit-text-stroke: 0.5px rgba(255, 255, 255, 0.1);
}

/* Intelligent Color Contrast Enhancement */
.smart-contrast {
  /* Future: CSS color-contrast() function support */
  color: light-dark(
    oklch(0.2 0.02 240),  /* Dark mode text */
    oklch(0.95 0.01 240)  /* Light mode text */
  );
  
  /* Current browser support fallback */
  color: var(--text-primary-p3, rgba(255, 255, 255, 0.95));
  
  /* Enhanced contrast for backgrounds */
  background: color-mix(
    in oklch,
    transparent 70%,
    rgba(26, 26, 26, 0.9) 30%
  );
}

/* CSS @supports for Progressive Enhancement */
@supports (backdrop-filter: blur(1px)) {
  .enhanced-readability::before {
    background: rgba(26, 26, 26, 0.6);
    backdrop-filter: 
      blur(20px) 
      saturate(1.3) 
      brightness(1.15)
      contrast(1.1);
  }
}

@supports (font-variation-settings: 'wght' 400) {
  .modern-typography {
    font-variation-settings: 
      'wght' var(--font-weight-adjustment, 400),
      'opsz' var(--optical-size-medium);
  }
  
  /* Dynamic weight adjustment based on container size */
  .hero-name.modern-typography {
    font-variation-settings: 
      'wght' var(--font-weight-black),
      'opsz' var(--optical-size-large);
  }
  
  .hero-title.modern-typography {
    font-variation-settings: 
      'wght' var(--font-weight-semibold),
      'opsz' var(--optical-size-medium);
  }
}

/* Hero Section Typography Enhancements */
.hero-section .modern-typography {
  letter-spacing: -0.025em;
  line-height: 1.2;
}

.hero-name.enhanced-text {
  font-size: clamp(2.5rem, 6vw, 4rem);
  font-variation-settings: 
    'wght' 900,
    'opsz' 32;
  color: var(--text-primary-p3);
  text-shadow: 
    0 2px 4px rgba(0, 0, 0, 0.9),
    0 4px 8px rgba(0, 0, 0, 0.7),
    0 8px 16px rgba(0, 0, 0, 0.4),
    0 0 32px rgba(30, 58, 138, 0.3);
  -webkit-text-stroke: 0.5px rgba(255, 255, 255, 0.1);
}

.hero-title.enhanced-text {
  font-size: clamp(1.25rem, 3vw, 1.75rem);
  font-variation-settings: 
    'wght' 600,
    'opsz' 18;
  color: var(--accent-primary-p3);
  text-shadow: 
    0 1px 3px rgba(0, 0, 0, 0.8),
    0 2px 6px rgba(0, 0, 0, 0.5),
    0 0 20px rgba(30, 58, 138, 0.4);
}

.hero-subtitle.enhanced-text {
  font-size: clamp(1rem, 2.5vw, 1.25rem);
  font-variation-settings: 
    'wght' 450,
    'opsz' 16;
  color: var(--text-secondary-p3);
  text-shadow: 
    0 1px 2px rgba(0, 0, 0, 0.9),
    0 2px 4px rgba(0, 0, 0, 0.6);
}

/* Interactive Typography States */
.interactive-text {
  transition: 
    font-variation-settings 0.3s ease,
    text-shadow 0.3s ease,
    color 0.3s ease;
}

.interactive-text:hover {
  font-variation-settings: 
    'wght' calc(var(--font-weight-normal) + 100),
    'opsz' calc(var(--optical-size-medium) + 2);
  text-shadow: 
    0 2px 4px rgba(0, 0, 0, 0.9),
    0 4px 8px rgba(0, 0, 0, 0.7),
    0 0 24px rgba(30, 58, 138, 0.4);
}

/* CTA Button Typography */
.cta-enhanced-text {
  font-variation-settings: 
    'wght' 600,
    'opsz' 16;
  text-shadow: 
    0 1px 2px rgba(0, 0, 0, 0.5),
    0 0 8px rgba(255, 255, 255, 0.2);
  letter-spacing: 0.025em;
}

.cta-enhanced-text:hover {
  font-variation-settings: 
    'wght' 650,
    'opsz' 18;
  text-shadow: 
    0 1px 3px rgba(0, 0, 0, 0.7),
    0 0 12px rgba(255, 255, 255, 0.3);
}

/* Specialty Items Enhancement */
.specialty-text.enhanced-text {
  font-variation-settings: 
    'wght' 500,
    'opsz' 16;
  color: var(--text-primary-p3);
  text-shadow: 
    0 1px 2px rgba(0, 0, 0, 0.8),
    0 0 12px rgba(30, 58, 138, 0.2);
}

/* Interest Tags Typography */
.interest-tag.enhanced-text {
  font-variation-settings: 
    'wght' 500,
    'opsz' 14;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
  color: var(--text-primary-p3);
}

/* Accessibility Enhancements */
@media (prefers-reduced-motion: reduce) {
  .interactive-text,
  .cta-enhanced-text {
    transition: none;
  }
}

@media (prefers-contrast: high) {
  .enhanced-readability::before {
    background: rgba(0, 0, 0, 0.95);
    backdrop-filter: none;
  }
  
  .premium-text-shadow,
  .enhanced-text {
    text-shadow: 
      0 0 4px rgba(0, 0, 0, 1),
      0 0 8px rgba(0, 0, 0, 1);
    -webkit-text-stroke: 1px rgba(255, 255, 255, 0.3);
  }
}

/* Print Optimizations */
@media print {
  .modern-typography {
    font-variation-settings: 'wght' 400;
    text-shadow: none;
    color: black !important;
  }
  
  .enhanced-readability::before {
    display: none;
  }
}

/* Future CSS Features (Progressive Enhancement) */
@supports (color-contrast(white vs black)) {
  .smart-contrast {
    color: color-contrast(
      var(--background-color) vs 
      white, black to AA
    );
  }
}

/* View Transitions API Support */
@supports (view-transition-name: auto) {
  .enhanced-text {
    view-transition-name: enhanced-typography;
  }
}

::view-transition-old(enhanced-typography),
::view-transition-new(enhanced-typography) {
  animation-duration: 0.5s;
  animation-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* CSS Nesting for Component Scoping */
.hero-section {
  & .enhanced-readability {
    --backdrop-intensity: 0.8;
    
    &::before {
      backdrop-filter: 
        blur(calc(16px * var(--backdrop-intensity))) 
        saturate(calc(1.2 * var(--backdrop-intensity)));
    }
  }
  
  & .modern-typography {
    font-variation-settings: 
      'wght' var(--hero-font-weight, 400),
      'opsz' var(--hero-optical-size, 18);
  }
}